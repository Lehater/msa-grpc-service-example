# Практическое задание. проектирование микросервисной архитектуры.

## Описание

Разработайте и разверните архитектуру для выбранной вами системы или приложения, состоящую из нескольких микросервисов,
использующих gRPC для взаимодействия. Вы должны выделить микросервисы, настроить их взаимодействие, развернуть
инфраструктуру с помощью Docker и Docker Compose, а также протестировать взаимодействие между сервисами.

## Шаги выполнения

1. **Выбор системы:**  
   Выберите систему или приложение, которое вы будете проектировать. Это может быть что угодно, например:

- Платформа для онлайн-торговли
- Система управления задачами
- Сервис для потоковой передачи данных
- Социальная сеть
- Система управления обучением

2. **Анализ функциональности:**  
   Составьте список ключевых функций вашей системы. Например:

- Управление пользователями
- Обработка заказов
- Отслеживание состояния заказов
- Управление платежами
- Оставление отзывов

Выделите независимые модули для каждой функции.

3. **Выделение микросервисов:**  
   Создайте два микросервиса, которые решают определенную задачу, будь то управления платежами или обработки заказов.
   Каждый микросервис должен имитировать одну из следующих функциональностей:

- **Сервис управления пользователями**: управляет данными пользователей и их аутентификацией.
- **Сервис обработки заказов**: обрабатывает заказы от пользователей.
- **Сервис управления платежами**: отвечает за финансирование и транзакции.
- **Сервис отслеживания состояния**: позволяет пользователям отслеживать состояние своих заказов.
- **Сервис отзывов**: позволяет пользователям оставлять и читать отзывы.

Убедитесь, что микросервисы минимально зависят друг от друга.

4. **Определение интерфейсов взаимодействия:**  
   Создайте файлы `.proto` для каждого сервиса:

- Определите gRPC методы для каждого сервиса, включая запросы и ответы.
- Используйте сериализацию данных в формате Protocol Buffers.

**Пример для сервиса управления пользователями:**

```proto
syntax = "proto3";
package user;

service UserService {
    rpc CreateUser(CreateUserRequest) returns (UserResponse);
    rpc GetUser(GetUserRequest) returns (UserResponse);
}

message CreateUserRequest {
    string name = 1;
    string email = 2;
}

message UserResponse {
    string user_id = 1;
    string name = 2;
    string email = 3;
}

message GetUserRequest {
    string user_id = 1;
}
```

5. **Настройка инфраструктуры с Docker:**

- Создайте **Dockerfile** для каждого микросервиса, указывая необходимые зависимости.
- Напишите файл **docker-compose.yml** для развертывания всех сервисов вместе, включая их зависимости и конфигурации.

**Пример `docker-compose.yml`:**

```yaml
version: '3.8'
services:
  user_service:
    build:
      context: ./user_service
    ports:
      - "5001:5001"
  order_service:
    build:
      context: ./order_service
    ports:
      - "5002:5002"
  payment_service:
    build:
      context: ./payment_service
    ports:
      - "5003:5003"
  tracking_service:
    build:
      context: ./tracking_service
    ports:
      - "5004:5004"
  review_service:
    build:
      context: ./review_service
    ports:
      - "5005:5005"
```

6. **Развертывание и тестирование:**  
   Сборка и запуск сервисов командой:

```bash
docker-compose up --build
```  

- Используйте **Postman** или **gRPC client** для тестирования взаимодействия между сервисами:
- Пример теста на создание пользователя, вызвав метод `CreateUser` на сервисе управления пользователями.

Ожидаемый результат

- **Развернутая система**: все микросервисы развернуты и работают в Docker-контейнерах.
- **Тестовое взаимодействие**: успешные тесты на gRPC вызовы между сервисами.
- **Отчет** с полным описанием шагов выполнения, приложенными диаграммами и описанием каждого микросервиса в формате
  PDF.

Критерии оценивания

| **Количество баллов** | **Оценка**              | **Формулировка критерия**                                                                |
|-----------------------|-------------------------|------------------------------------------------------------------------------------------|
| **5 баллов**          | **Верно**               | Отчет полный, выполнены все требования.                                                  |
| **4 балла**           | **Требуется доработка** | Отчет неполный, выполнены не все требования. Развернут только один сервис.               |
| **3 балла**           | **Требуется доработка** | Отчет неполный, выполнены не все требования. Нет тестового взаимодействия.               |
| **1 балл**            | **Неверно**             | Отчет неполный, не выполнена большая часть требований. Не представлен полный функционал. |
| **0 баллов**          | **Неверно**             | Большое количество ошибок или отсутствие выполнения.                                     |

**Максимальный балл за задание: 5.**

```